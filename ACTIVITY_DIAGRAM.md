# IntelliTradeAI - Activity Diagrams

## Main System Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           USER INTERACTION FLOW                              │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────┐
                                    │  START  │
                                    └────┬────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   User Opens App     │
                              │   (Streamlit UI)     │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   User Logs In       │
                              │   (Authentication)   │
                              └──────────┬───────────┘
                                         │
                                         ▼
                         ┌───────────────────────────────┐
                         │   Select Analysis Page        │
                         │   (AI Analysis / Backtest)    │
                         └───────────────┬───────────────┘
                                         │
                    ┌────────────────────┴────────────────────┐
                    │                                         │
                    ▼                                         ▼
         ┌──────────────────┐                      ┌──────────────────┐
         │   AI Analysis    │                      │   Backtesting    │
         └────────┬─────────┘                      └────────┬─────────┘
                  │                                         │
                  ▼                                         ▼
         ┌──────────────────┐                      ┌──────────────────┐
         │  Select Assets   │                      │  Configure Test  │
         │  (Multi-select)  │                      │   Parameters     │
         └────────┬─────────┘                      └────────┬─────────┘
                  │                                         │
                  ▼                                         ▼
         ┌──────────────────┐                      ┌──────────────────┐
         │  Select Period   │                      │  Run Backtest    │
         │  (1M/3M/6M/1Y)   │                      └────────┬─────────┘
         └────────┬─────────┘                               │
                  │                                         ▼
                  ▼                                ┌──────────────────┐
         ┌──────────────────┐                      │  View Results    │
         │ Run AI Analysis  │                      │  & Metrics       │
         └────────┬─────────┘                      └────────┬─────────┘
                  │                                         │
                  ▼                                         │
         ┌──────────────────┐                               │
         │  View Signals    │                               │
         │  & Charts        │                               │
         └────────┬─────────┘                               │
                  │                                         │
                  └────────────────────┬──────────────────┬─┘
                                       │
                                       ▼
                              ┌──────────────────┐
                              │   User Reviews   │
                              │   Information    │
                              └────────┬─────────┘
                                       │
                                       ▼
                                  ┌─────────┐
                                  │   END   │
                                  └─────────┘
```

---

## Prediction Pipeline Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         AI PREDICTION PIPELINE                               │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────┐
                                    │  START  │
                                    └────┬────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │  Receive Request     │
                              │  (Symbol + Period)   │
                              └──────────┬───────────┘
                                         │
                    ┌────────────────────┴────────────────────┐
                    │              Is Crypto?                  │
                    │                                          │
              ┌─────┴─────┐                           ┌────────┴────────┐
              │    YES    │                           │       NO        │
              ▼           │                           │                 ▼
   ┌──────────────────┐   │                           │    ┌──────────────────┐
   │  Fetch from      │   │                           │    │  Fetch from      │
   │  CoinMarketCap   │   │                           │    │  Yahoo Finance   │
   │  + Yahoo Finance │   │                           │    │  (Stock Data)    │
   └────────┬─────────┘   │                           │    └────────┬─────────┘
            │             │                           │             │
            └─────────────┴───────────────────────────┴─────────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Validate Data      │
                              │   (Check for gaps)   │
                              └──────────┬───────────┘
                                         │
                         ┌───────────────┴───────────────┐
                         │     Sufficient Data?          │
                         │     (> 50 data points)        │
                         └───────────────┬───────────────┘
                                         │
                    ┌────────────────────┴────────────────────┐
                    │                                         │
              ┌─────┴─────┐                           ┌───────┴───────┐
              │    YES    │                           │      NO       │
              ▼           │                           │               ▼
   ┌──────────────────┐   │                           │    ┌──────────────────┐
   │ Feature Engineer │   │                           │    │  Return Error:   │
   │  (80 features)   │   │                           │    │  "Insufficient   │
   └────────┬─────────┘   │                           │    │   Data"          │
            │             │                           │    └────────┬─────────┘
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │ Calculate:       │   │                           │             │
   │ - RSI, MACD      │   │                           │             │
   │ - Bollinger Bands│   │                           │             │
   │ - Moving Averages│   │                           │             │
   │ - Momentum       │   │                           │             │
   │ - Volume Metrics │   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │  Load Trained    │   │                           │             │
   │  Model (Joblib)  │   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │  Scale Features  │   │                           │             │
   │  (StandardScaler)│   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │  Run Prediction  │   │                           │             │
   │  (Random Forest) │   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │  Get Confidence  │   │                           │             │
   │  (predict_proba) │   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            ▼             │                           │             │
   ┌──────────────────┐   │                           │             │
   │ Determine Signal:│   │                           │             │
   │ if conf > 0.6:   │   │                           │             │
   │   BUY or SELL    │   │                           │             │
   │ else:            │   │                           │             │
   │   HOLD           │   │                           │             │
   └────────┬─────────┘   │                           │             │
            │             │                           │             │
            └─────────────┴───────────────────────────┴─────────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Return Result:     │
                              │   - Signal           │
                              │   - Confidence       │
                              │   - Current Price    │
                              └──────────┬───────────┘
                                         │
                                         ▼
                                    ┌─────────┐
                                    │   END   │
                                    └─────────┘
```

---

## Signal Fusion Flow (Conflict Resolution)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      SIGNAL FUSION ENGINE                                    │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────┐
                                    │  START  │
                                    └────┬────┘
                                         │
              ┌──────────────────────────┴──────────────────────────┐
              │                                                      │
              ▼                                                      ▼
   ┌──────────────────┐                                   ┌──────────────────┐
   │  ML Predictor    │                                   │  Pattern         │
   │  Analysis        │                                   │  Recognition     │
   └────────┬─────────┘                                   └────────┬─────────┘
            │                                                      │
            ▼                                                      ▼
   ┌──────────────────┐                                   ┌──────────────────┐
   │  ML Signal:      │                                   │  Pattern Signal: │
   │  - BUY/SELL/HOLD │                                   │  - BUY/SELL/HOLD │
   │  - Confidence %  │                                   │  - Confidence %  │
   └────────┬─────────┘                                   └────────┬─────────┘
            │                                                      │
            └──────────────────────────┬───────────────────────────┘
                                       │
                                       ▼
                         ┌─────────────────────────────┐
                         │    Compare Signals          │
                         │    (Agreement Check)        │
                         └─────────────┬───────────────┘
                                       │
              ┌────────────────────────┼────────────────────────┐
              │                        │                        │
              ▼                        ▼                        ▼
   ┌──────────────────┐    ┌──────────────────┐    ┌──────────────────┐
   │    AGREE         │    │    CONFLICT      │    │   ONE NEUTRAL    │
   │  (Same Signal)   │    │ (Opposite Sigs)  │    │   (One = HOLD)   │
   └────────┬─────────┘    └────────┬─────────┘    └────────┬─────────┘
            │                       │                       │
            ▼                       ▼                       ▼
   ┌──────────────────┐    ┌──────────────────┐    ┌──────────────────┐
   │  Use Higher      │    │  Both High Conf? │    │  Use Non-HOLD    │
   │  Confidence      │    │  (Both > 65%)    │    │  Signal with     │
   │  Signal          │    └────────┬─────────┘    │  Lower Weight    │
   └────────┬─────────┘             │              └────────┬─────────┘
            │              ┌────────┴────────┐              │
            │              │                 │              │
            │        ┌─────┴─────┐     ┌─────┴─────┐        │
            │        │    YES    │     │    NO     │        │
            │        ▼           │     │           ▼        │
            │   ┌──────────┐     │     │    ┌──────────┐    │
            │   │  HOLD    │     │     │    │ Use ML   │    │
            │   │ (Safety) │     │     │    │ Signal   │    │
            │   │ + Warning│     │     │    │ (Primary)│    │
            │   └────┬─────┘     │     │    └────┬─────┘    │
            │        │           │     │         │          │
            └────────┴───────────┴─────┴─────────┴──────────┘
                                       │
                                       ▼
                         ┌─────────────────────────────┐
                         │    Final Unified Signal     │
                         │    + Combined Confidence    │
                         │    + ML Insight             │
                         │    + Pattern Insight        │
                         └─────────────┬───────────────┘
                                       │
                                       ▼
                                  ┌─────────┐
                                  │   END   │
                                  └─────────┘
```

---

## Model Training Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         MODEL TRAINING PIPELINE                              │
└─────────────────────────────────────────────────────────────────────────────┘

                                    ┌─────────┐
                                    │  START  │
                                    └────┬────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Fetch Historical   │
                              │   Data (2 Years)     │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Clean & Validate   │
                              │   OHLCV Data         │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Feature Engineering│
                              │   (Create 80         │
                              │    Features)         │
                              └──────────┬───────────┘
                                         │
                         ┌───────────────┴───────────────┐
                         │                               │
                         ▼                               ▼
              ┌──────────────────┐            ┌──────────────────┐
              │ Technical        │            │ Price-Based      │
              │ Indicators:      │            │ Features:        │
              │ - RSI            │            │ - Returns        │
              │ - MACD           │            │ - High/Low %     │
              │ - Bollinger Bands│            │ - Price Changes  │
              │ - EMA (Multiple) │            │ - Lagged Values  │
              └────────┬─────────┘            └────────┬─────────┘
                       │                               │
                       └───────────────┬───────────────┘
                                       │
                                       ▼
                              ┌──────────────────────┐
                              │   Create Target      │
                              │   Variable           │
                              │   (Next Day Up/Down) │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Train/Test Split   │
                              │   (80% / 20%)        │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Feature Scaling    │
                              │   (StandardScaler)   │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Feature Selection  │
                              │   (Top 50 Features)  │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Hyperparameter     │
                              │   Optimization       │
                              │   (GridSearchCV)     │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Train Random       │
                              │   Forest Model       │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Evaluate:          │
                              │   - Accuracy         │
                              │   - Precision        │
                              │   - Recall           │
                              │   - F1 Score         │
                              └──────────┬───────────┘
                                         │
                                         ▼
                              ┌──────────────────────┐
                              │   Save Model         │
                              │   (Joblib Pickle)    │
                              │   → models/cache/    │
                              └──────────┬───────────┘
                                         │
                                         ▼
                                    ┌─────────┐
                                    │   END   │
                                    └─────────┘
```

---

## Data Flow Summary

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         DATA FLOW OVERVIEW                                   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  External   │      │   Data      │      │   Feature   │      │    ML       │
│  APIs       │ ───▶ │   Ingestion │ ───▶ │   Engine    │ ───▶ │   Models    │
│             │      │             │      │             │      │             │
│ - CMC API   │      │ - Fetch     │      │ - Calculate │      │ - Random    │
│ - Yahoo     │      │ - Cache     │      │ - Clean     │      │   Forest    │
│   Finance   │      │ - Validate  │      │ - Transform │      │ - Predict   │
└─────────────┘      └─────────────┘      └─────────────┘      └──────┬──────┘
                                                                      │
      ┌───────────────────────────────────────────────────────────────┘
      │
      ▼
┌─────────────┐      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│  Signal     │      │  Dashboard  │      │    User     │      │   User      │
│  Fusion     │ ───▶ │   Display   │ ───▶ │   Reviews   │ ───▶ │   Decision  │
│             │      │             │      │             │      │             │
│ - Combine   │      │ - Charts    │      │ - Signals   │      │ - Trade     │
│ - Resolve   │      │ - Cards     │      │ - Levels    │      │ - Hold      │
│ - Warn      │      │ - Insights  │      │ - Analysis  │      │ - Research  │
└─────────────┘      └─────────────┘      └─────────────┘      └─────────────┘


                    ┌─────────────────────────────────┐
                    │         ASSET COVERAGE          │
                    ├─────────────────────────────────┤
                    │                                 │
                    │  ┌─────────────────────────┐    │
                    │  │   CRYPTOCURRENCIES (20) │    │
                    │  │   BTC, ETH, USDT, XRP,  │    │
                    │  │   BNB, SOL, USDC, TRX,  │    │
                    │  │   DOGE, ADA, AVAX, SHIB │    │
                    │  │   TON, DOT, LINK, BCH,  │    │
                    │  │   LTC, XLM, WTRX, STETH │    │
                    │  └─────────────────────────┘    │
                    │                                 │
                    │  ┌─────────────────────────┐    │
                    │  │      STOCKS (18)        │    │
                    │  │   AAPL, MSFT, GOOGL,    │    │
                    │  │   AMZN, NVDA, META,     │    │
                    │  │   TSLA, JPM, WMT, JNJ,  │    │
                    │  │   V, BAC, DIS, NFLX,    │    │
                    │  │   INTC, AMD, CRM, ORCL  │    │
                    │  └─────────────────────────┘    │
                    │                                 │
                    │         TOTAL: 36 ASSETS        │
                    └─────────────────────────────────┘
```

---

## Legend

| Symbol | Meaning |
|--------|---------|
| ┌─┐ └─┘ | Process/Activity Box |
| ───▶ | Flow Direction |
| ◇ | Decision Point |
| ▼ | Downward Flow |
| │ | Vertical Connection |
| ├ ┤ | Branch Points |

---

**Document Version**: 1.0  
**Last Updated**: November 22, 2025  
**System**: IntelliTradeAI Trading Platform
